/ {
    keymap {
        compatible = "zmk,keymap";

        // Define the default layer
        default_layer {
            bindings = <&kp Q>, <&kp W>, <&kp E>, <&kp R>, <&kp T>, <&kp Y>, <&kp U>, <&kp I>, <&kp O>, <&kp P>,
                       <&kp A>, <&kp S>, <&kp D>, <&kp F>, <&kp G>, <&kp H>, <&kp J>, <&kp K>, <&kp L>, <&kp SEMICOLON>,
                       <&kp Z>, <&kp X>, <&kp C>, <&kp V>, <&kp B>, <&kp N>, <&kp M>, <&kp COMMA>, <&kp DOT>, <&kp SLASH>,
                       <&kp ESC>, <&kp TAB>, <&kp SPACE>, <&kp ENTER>, <&kp BACKSPACE>, <&kp SHIFT>, <&kp CTRL>, <&kp ALT>, <&kp GUI>, <&kp CAPSLOCK>;
        };

        // Define the Mac-specific layer
        mac_layer {
            bindings = <&kp Q>, <&kp W>, <&kp E>, <&kp R>, <&kp T>, <&kp Y>, <&kp U>, <&kp I>, <&kp O>, <&kp P>,
                       <&kp A>, <&kp S>, <&kp D>, <&kp F>, <&kp G>, <&kp H>, <&kp J>, <&kp K>, <&kp L>, <&kp SEMICOLON>,
                       <&kp Z>, <&kp X>, <&kp C>, <&kp V>, <&kp B>, <&kp N>, <&kp M>, <&kp COMMA>, <&kp DOT>, <&kp SLASH>,
                       <&kp ESC>, <&kp TAB>, <&kp SPACE>, <&kp ENTER>, <&kp BACKSPACE>, <&kp SHIFT>, <&kp CTRL>, <&kp OPTION>, <&kp CMD>, <&kp CAPSLOCK>;
        };

        // Define the Windows-specific layer
        windows_layer {
            bindings = <&kp Q>, <&kp W>, <&kp E>, <&kp R>, <&kp T>, <&kp Y>, <&kp U>, <&kp I>, <&kp O>, <&kp P>,
                       <&kp A>, <&kp S>, <&kp D>, <&kp F>, <&kp G>, <&kp H>, <&kp J>, <&kp K>, <&kp L>, <&kp SEMICOLON>,
                       <&kp Z>, <&kp X>, <&kp C>, <&kp V>, <&kp B>, <&kp N>, <&kp M>, <&kp COMMA>, <&kp DOT>, <&kp SLASH>,
                       <&kp ESC>, <&kp TAB>, <&kp SPACE>, <&kp ENTER>, <&kp BACKSPACE>, <&kp SHIFT>, <&kp CTRL>, <&kp ALT>, <&kp WIN>, <&kp CAPSLOCK>;
        };

        // Define the OS detection behavior
        os_layer_switch {
            label = "OS Layer Switch";
            compatible = "zmk,layer-switch";
            bindings = <&os_host>;
        };

        // Define the host OS condition
        os_host {
            label = "OS Host";
            compatible = "zmk,behavior-host";
            mac-layer = <&mac_layer>;
            windows-layer = <&windows_layer>;
        };
    };
};
